<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Naphome-Audio - Naphome</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            min-height: 100vh;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }
        
        header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 2rem 0;
            text-align: center;
        }
        
        header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            font-weight: 300;
        }
        
        header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        nav {
            background: #34495e;
            padding: 1rem 0;
            text-align: center;
            border-bottom: 3px solid #3498db;
        }
        
        nav a {
            color: white;
            text-decoration: none;
            margin: 0 1.5rem;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        
        nav a:hover {
            background: #3498db;
            transform: translateY(-2px);
        }
        
        main {
            padding: 3rem 2rem;
            max-width: 900px;
            margin: 0 auto;
        }
        
        h1, h2, h3, h4, h5, h6 {
            color: #2c3e50;
            margin-top: 2rem;
            margin-bottom: 1rem;
            font-weight: 600;
        }
        
        h1 {
            font-size: 2.2rem;
            border-bottom: 3px solid #3498db;
            padding-bottom: 0.5rem;
        }
        
        h2 {
            font-size: 1.8rem;
            color: #34495e;
        }
        
        h3 {
            font-size: 1.4rem;
            color: #7f8c8d;
        }
        
        p {
            margin-bottom: 1.5rem;
            text-align: justify;
        }
        
        ul, ol {
            margin: 1rem 0 1rem 2rem;
        }
        
        li {
            margin-bottom: 0.5rem;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 2rem 0;
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-radius: 8px;
            overflow: hidden;
        }
        
        th, td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid #ecf0f1;
        }
        
        th {
            background: #3498db;
            color: white;
            font-weight: 600;
            text-transform: uppercase;
            font-size: 0.9rem;
            letter-spacing: 0.5px;
        }
        
        tr:hover {
            background: #f8f9fa;
        }
        
        code {
            background: #f1f2f6;
            padding: 0.2rem 0.4rem;
            border-radius: 3px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 0.9rem;
            color: #e74c3c;
        }
        
        pre {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 1.5rem;
            border-radius: 8px;
            overflow-x: auto;
            margin: 1.5rem 0;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        pre code {
            background: none;
            color: inherit;
            padding: 0;
        }
        
        blockquote {
            border-left: 4px solid #3498db;
            margin: 2rem 0;
            padding: 1rem 2rem;
            background: #f8f9fa;
            border-radius: 0 8px 8px 0;
            font-style: italic;
        }
        
        .highlight {
            background: linear-gradient(120deg, #a8edea 0%, #fed6e3 100%);
            padding: 2rem;
            border-radius: 10px;
            margin: 2rem 0;
            border-left: 5px solid #3498db;
        }
        
        .emoji {
            font-size: 1.2em;
        }
        
        /* Side-by-side comparison images */
        .comparison-table img {
            width: 40%;
            height: auto;
            max-width: 300px;
            object-fit: cover;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        footer {
            background: #2c3e50;
            color: white;
            text-align: center;
            padding: 2rem;
            margin-top: 3rem;
        }
        
        .back-to-top {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            cursor: pointer;
            font-size: 1.2rem;
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.4);
            transition: all 0.3s ease;
        }
        
        .back-to-top:hover {
            background: #2980b9;
            transform: translateY(-3px);
        }
        
        @media (max-width: 768px) {
            .container {
                margin: 0;
                box-shadow: none;
            }
            
            main {
                padding: 2rem 1rem;
            }
            
            header h1 {
                font-size: 2rem;
            }
            
            nav a {
                margin: 0 0.5rem;
                padding: 0.4rem 0.8rem;
                font-size: 0.9rem;
            }
            
            table {
                font-size: 0.9rem;
            }
            
            th, td {
                padding: 0.8rem 0.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ðŸŒ™ Naphome</h1>
            <p>Smart Sleep Device Documentation</p>
        </header>
        
        <nav>
            <a href="index.html">Home</a><a href="P0.html">P0 Specs</a><a href="Proposal.html">Proposal</a><a href="Naphome_Audio.html">Audio System</a><a href="SPECS.html">Core Specs</a><a href="Naphome_egg.html">Development Plan</a>
        </nav>
        
        <main>
            <h1 id="naphome-audio">Naphome-Audio</h1>
<h3 id="smart-bedside-slip-in-subwoofer-system">Smart Bedside + Slip-In Subwoofer System</h3>
<p><em>(ESP32-based synchronized audio and lighting network)</em></p>
<hr />
<h2 id="1-overview">1. Overview</h2>
<p>Naphome-Audio is a unified design for a <strong>bedside smart audio system</strong> featuring:</p>
<ul>
<li>High-quality <strong>stereo speakers</strong> on each nightstand  </li>
<li><strong>Synchronized RGB or CCT lamps</strong> (left + right)  </li>
<li>An <strong>under-mattress tactile subwoofer pad</strong> for low-frequency vibration  </li>
<li>Cloud and local playback via ESP32 (A2DP + Wi-Fi)  </li>
<li>Full synchronization across audio and light using local multicast timing  </li>
</ul>
<hr />
<h2 id="2-bedside-speaker-targets">2. Bedside Speaker Targets</h2>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Spec</th>
</tr>
</thead>
<tbody>
<tr>
<td>Frequency range</td>
<td>80 Hz â€“ 18 kHz</td>
</tr>
<tr>
<td>SPL (listener @ 1 m)</td>
<td>70 â€“ 80 dB</td>
</tr>
<tr>
<td>Output Power</td>
<td>5 W Ã— 2 (10 W total)</td>
</tr>
<tr>
<td>Distortion</td>
<td>&lt; 1 % THD typical</td>
</tr>
<tr>
<td>Supply</td>
<td>12 V 2 A (24 W headroom)</td>
</tr>
<tr>
<td>Audio Input</td>
<td>IÂ²S from ESP32 DAC</td>
</tr>
<tr>
<td>Connectivity</td>
<td>Wi-Fi + BT A2DP</td>
</tr>
<tr>
<td>Enclosure</td>
<td>0.5 L Ã— 2 sealed with passive radiator</td>
</tr>
</tbody>
</table>
<p><strong>Typical configuration</strong></p>
<pre><code>ESP32-S3  â†’  IÂ²S DAC (PCM5102A or ES8388)
            â†’  TPA3116D2 Amp (2 Ã— 15 W)
            â†’  2 Ã— 2.5â€³ 4 Î© full-range drivers + 3â€³ passive radiator
            â†’  12 V 2 A power brick
</code></pre>
<p><strong>Sound tuning</strong>
- Gentle bass shelf +3 dB @ 120 Hz<br />
- Treble lift +2 dB @ 8 kHz<br />
- Gamma-corrected brightness curves for LED feedback  </p>
<hr />
<h2 id="3-synchronized-lamp-system">3. Synchronized Lamp System</h2>
<h3 id="concept">Concept</h3>
<p>Two matching bedside lamps operate in <strong>phase-locked sync</strong> over Wi-Fi.<br />
One ESP32 acts as the <strong>master clock</strong> and scene generator; peers render frames
based on timestamped packets.</p>
<h3 id="clocking">Clocking</h3>
<ul>
<li>Multicast UDP beacons: <code>SYNC { master_time_us }</code> every 200 ms  </li>
<li>Peers estimate offset + drift (ppm)  </li>
<li>Animation frames carry <code>play_time_us</code>; peers render when local â‰¥ play_time  </li>
</ul>
<h3 id="modes">Modes</h3>
<ul>
<li><strong>Mirror:</strong> identical L/R effects  </li>
<li><strong>Complementary:</strong> 180Â° hue or +90Â° phase offset  </li>
<li><strong>Stereo-linked:</strong> each reacts to L/R audio energy  </li>
<li><strong>Circadian:</strong> auto CCT + brightness schedule  </li>
</ul>
<h3 id="hardware">Hardware</h3>
<table>
<thead>
<tr>
<th>Component</th>
<th>Example</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>LED engine</td>
<td>SK6812 RGBW strip or tunable CCT COB</td>
<td>RGBW preferred for accurate whites</td>
</tr>
<tr>
<td>Driver</td>
<td>PCA9685 + MOSFETs or dedicated CC LED driver</td>
<td>For CCT channels</td>
</tr>
<tr>
<td>Power</td>
<td>12 V 3 A brick</td>
<td>Shared with speaker if co-located</td>
</tr>
<tr>
<td>Control</td>
<td>ESP32-S3 + rotary or capacitive touch</td>
<td>OTA-ready</td>
</tr>
<tr>
<td>Diffuser</td>
<td>Frosted acrylic / fabric shade</td>
<td>Even glow</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="4-under-mattress-slip-in-subwoofer-pad">4. Under-Mattress Slip-In Subwoofer Pad</h2>
<h3 id="purpose">Purpose</h3>
<p>Provide <strong>tactile low-frequency feedback</strong> for music or ambient sound without audible rumble.<br />
All electronics remain outside the mattress; only a passive vibration pad sits between mattress and box spring.</p>
<h3 id="structure">Structure</h3>
<table>
<thead>
<tr>
<th>Layer</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Top:</strong></td>
<td>Mattress</td>
</tr>
<tr>
<td><strong>Middle:</strong></td>
<td>Aluminum vibration plate (6â€“8 mm Ã— 30 Ã— 40 cm)</td>
</tr>
<tr>
<td><strong>Mounted:</strong></td>
<td>AuraSound AST-2B-4 or Dayton BST-1 tactile transducer</td>
</tr>
<tr>
<td><strong>Bottom:</strong></td>
<td>Sorbothane or neoprene isolation feet</td>
</tr>
<tr>
<td><strong>Output:</strong></td>
<td>2-core speaker wire (16 AWG) to external amp</td>
</tr>
</tbody>
</table>
<h3 id="placement">Placement</h3>
<ul>
<li>Insert from <strong>head of bed</strong>, centered left/right, plate facing up.  </li>
<li>Keep thickness â‰ˆ 3â€“4 cm.  </li>
<li>No electronics inside mattress stack.</li>
</ul>
<h3 id="amplification">Amplification</h3>
<table>
<thead>
<tr>
<th>Component</th>
<th>Example</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>Amp</td>
<td>TPA3116/3118 mono 50â€“100 W @ 4 Î©</td>
<td>Class-D, external</td>
</tr>
<tr>
<td>Power</td>
<td>24 V 5 A supply</td>
<td>120 W headroom</td>
</tr>
<tr>
<td>Filters</td>
<td>HP 25 Hz, LP 120 Hz</td>
<td>Protect and limit band</td>
</tr>
<tr>
<td>DAC source</td>
<td>PCM5102A / ES8388 from ESP32</td>
<td>Line-level output</td>
</tr>
</tbody>
</table>
<h3 id="wiring">Wiring</h3>
<pre><code>Phone â†’ BT â†’ ESP32 (A2DP Sink)
ESP32 â†’ IÂ²S â†’ DAC â†’ Amp â†’ Tactile Pad
Amp + PSU outside bed frame
Speaker wire only under mattress
</code></pre>
<hr />
<h2 id="5-audio-synchronization-framework">5. Audio Synchronization Framework</h2>
<h3 id="overview">Overview</h3>
<p>A single ESP32 (master) handles timing; all nodes subscribe to <strong>multicast UDP</strong> frames.</p>
<p><strong>Packet formats</strong></p>
<pre><code class="language-c">struct Sync {
  uint16_t magic;        // 0x51NC
  uint32_t t_master_us;  // master timestamp
}

struct Frame {
  uint16_t magic;        // 0xFRAE
  uint32_t play_time_us; // scheduled playback time
  uint8_t  mode;         // animation / audio pattern id
  uint8_t  params[...];  // scene parameters
}
</code></pre>
<h3 id="timing">Timing</h3>
<ul>
<li>Beacons every 200 ms; frames buffered 30 ms ahead  </li>
<li>Peers maintain jitter â‰¤ 2 ms  </li>
<li>Sample clocks corrected via PLL or micro-resample  </li>
<li>Suitable for both <strong>audio</strong> and <strong>lamp</strong> sync  </li>
</ul>
<hr />
<h2 id="6-safety-comfort">6. Safety &amp; Comfort</h2>
<table>
<thead>
<tr>
<th>Concern</th>
<th>Mitigation</th>
</tr>
</thead>
<tbody>
<tr>
<td>Heat in bed</td>
<td>All active electronics external</td>
</tr>
<tr>
<td>Electrical isolation</td>
<td>Only passive wires under mattress</td>
</tr>
<tr>
<td>Volume / vibration</td>
<td>Start &lt; 20 %, ramp gradually</td>
</tr>
<tr>
<td>Infant safety</td>
<td>Do <em>not</em> use in cribs or with infants</td>
</tr>
<tr>
<td>Overnight use</td>
<td>Moderate gain; allow airflow around amp/PSU</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="7-example-bom-snapshot-single-bedside-setup">7. Example BOM Snapshot (single bedside setup)</h2>
<table>
<thead>
<tr>
<th>Item</th>
<th>Example</th>
<th>Est. Cost (USD, 10k qty)</th>
</tr>
</thead>
<tbody>
<tr>
<td>ESP32-S3-WROOM-1</td>
<td>â€”</td>
<td>2.20</td>
</tr>
<tr>
<td>PCM5102A DAC</td>
<td>â€”</td>
<td>0.80</td>
</tr>
<tr>
<td>TPA3116D2 Amp</td>
<td>â€”</td>
<td>1.50</td>
</tr>
<tr>
<td>2 Ã— 2.5â€³ Speakers + Radiator</td>
<td>Tang Band / Peerless</td>
<td>3.00</td>
</tr>
<tr>
<td>RGBW LED Module</td>
<td>SK6812</td>
<td>0.90</td>
</tr>
<tr>
<td>12 V 2 A PSU</td>
<td>â€”</td>
<td>2.50</td>
</tr>
<tr>
<td>Enclosure &amp; Mounts</td>
<td>â€”</td>
<td>2.00</td>
</tr>
<tr>
<td><strong>Total (est.)</strong></td>
<td></td>
<td><strong>â‰ˆ $13/unit</strong></td>
</tr>
</tbody>
</table>
<hr />
<h2 id="8-expansion-future-work">8. Expansion &amp; Future Work</h2>
<ul>
<li>Dual-pad stereo vibration with Wi-Fi clock sync  </li>
<li>LE Audio support when ESP32-H4 releases  </li>
<li>Integrated sensor feedback (COâ‚‚, VOC, temp) for adaptive ambient scenes  </li>
<li>Unified OTA update channel for all bedside nodes  </li>
</ul>
<hr />
<h3 id="summary">Summary</h3>
<blockquote>
<p>Naphome-Audio delivers a warm, synchronized sensory environment:
balanced bedside audio, gentle light choreography, and silent tactile bass â€”
all coordinated by the ESP32 platform with precise timing and safe design.</p>
</blockquote>
<hr />
<p><em>Syzygy Labs â€” Naphome Prototype Audio System, 2025</em></p>
        </main>
        
        <footer>
            <p>&copy; 2025 Syzygy Labs - Naphome Smart Sleep Device</p>
        </footer>
    </div>
    
    <button class="back-to-top" onclick="window.scrollTo({top: 0, behavior: 'smooth'})">â†‘</button>
    
    <script>
        // Authentication check
        if (!document.cookie.includes('naphome-auth=authenticated') && 
            !window.location.search.includes('bypass=naphome-bypass-2025')) {
            window.location.href = '/auth';
        }
        
        // Smooth scrolling for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
        
        // Show/hide back to top button
        window.addEventListener('scroll', function() {
            const backToTop = document.querySelector('.back-to-top');
            if (window.pageYOffset > 300) {
                backToTop.style.display = 'block';
            } else {
                backToTop.style.display = 'none';
            }
        });
        
        // Hide back to top button initially
        document.querySelector('.back-to-top').style.display = 'none';
    </script>
</body>
</html>